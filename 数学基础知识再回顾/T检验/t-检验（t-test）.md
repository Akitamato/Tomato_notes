# t-检验（t-test）

## 概念

t-检验是一个用于比较两个样本**均值**的统计学检验。它用于假设检验，原假设为组均值之差为0，备择假设为组均值之差不为0.它通常用于假设检验以确定过程或处理是否确实对感兴趣的群体有影响，或者两组是否彼此不同。



> t-test例子
>
> 您想知道鸢尾花的平均花瓣长度是否因品种而异。 您发现花园中生长着两种不同种类的鸢尾花，并测量了每种鸢尾花的 25 片花瓣。 您可以使用 t 检验以及原假设和备择假设来检验这两组之间的差异。
>
> *  原假设 (H0) 是这些组均值之间的真实差异为零。 
> * 备择假设 (Ha) 是真正的差异不为零。

## 原理

t 检验测量组均值的差异除以两组均值的合并标准误差。 通过这种方式，它计算出一个数字（t 值），说明被比较的两组之间差异的大小，并估计这种差异纯粹是偶然存在的可能性（p 值）。

![\begin{equation*}t=\dfrac{\bar{x}_{1}-\bar{x}_{2}}{\sqrt{(s^2(\frac{1}{n_{1}}+\frac{1}{n_{2}}))}}}\end{equation*}](https://www.scribbr.com/wp-content/ql-cache/quicklatex.com-f6b3ae54d802e090f4d5d5816babc8b0_l3.png)

s^2是两组的合并标准误，n1和n2是每组的观察数。

较大的 t 值表示组均值之间的差异大于合并标准误差，表明组间差异更显着。

您可以将计算出的 t 值与临界值图表（例如[Student’s *t* table](https://www.scribbr.com/statistics/students-t-table/)）中的值进行比较，以确定您的 t 值是否大于偶然预期的值。 如果是这样，您可以拒绝原假设并得出两组实际上不同的结论。

## 种类

#### 单样本t-test（one-sample t-test）

单样本 t 检验用于将单个群体与标准值进行比较（例如，确定特定城镇的平均寿命是否与国家平均水平不同）。

#### 配对t-test（paired t-test）

配对 t 检验用于比较某个实验干预前后或两个不同时间点的单个群体（例如，在学习材料前后测量学生在测试中的表现）。

## 什么时候使用t-test

t 检验只能在比较两组的平均值时使用（也称为成对比较）。 如果您想比较两个以上的组，或者如果您想进行多个成对比较，请使用方差分析检验或事后检验。 t 检验是差异的参数检验，这意味着它对您的数据做出与其他参数检验相同的假设。

t 检验假设您的数据：

* 是独立的 

* 是（大约）正态分布的 

* 在每个被比较的组中具有相似的方差量（也称为方差同质性）

 如果您的数据不符合这些假设，您可以尝试非参数替代 t 测试，例如 Wilcoxon Signed-Rank 测试，用于具有不等方差的数据。

## t-test的选择

选择t检验时，需要考虑两点：被比较的群体是来自单一群体还是来自两个不同的群体，是否要检验特定方向的差异

<img src="https://www.scribbr.com/wp-content/uploads/2022/12/What-type-of-t-test-should-I-use.webp" alt="What type of t-test should I use" style="zoom: 150%;" />

**单样本，双样本，或者配对t-test？**

* 如果这些组来自单一群体（例如，在实验治疗前后进行测量），请执行配对 t 检验。 这是一个[within-subjects design(https://www.scribbr.com/methodology/within-subjects-design/)）。
* 如果这些群体来自两个不同的人群（例如，两个不同的物种，或来自两个不同城市的人），请执行双样本 t 检验（也称为独立 t 检验）。这是一个[between-subjects design](https://www.scribbr.com/methodology/between-subjects-design/)。
* 如果将一组与标准值进行比较（例如，将液体的酸度与中性 pH 值 7 进行比较），请执行单样本 t 检验。

**单尾或者双尾t-test？**

* 如果您只关心两个总体是否不同，请执行双尾 t 检验。
* 如果您想知道一个总体均值是大于还是小于另一个，请执行单尾 t 检验

> t 检验示例
>
> 在花瓣长度是否因物种而异的检验中：您的观察来自两个不同的种群（不同的物种），因此您执行双样本 t 检验。 你不关心差异的方向，只关心有没有差异，所以你选择用双尾t检验。

***那当需要比对多组的时候可以用 t-test吗？***

> t 检验不应用于测量两个以上组之间的差异，因为当比较多个组时，t 检验的误差结构会低估实际误差。 如果您想同时比较几组的均值，最好使用另一种统计检验，例如方差分析（ [ANOVA](https://www.scribbr.com/statistics/one-way-anova/) ）或事后检验（post-hoc test）。

## t-test的R语言实现

```R
##以花瓣的例子举例
t.test(Petal.Length ~ Species, data = flower.data)
```

输出结果：

![T-test output in R](https://www.scribbr.com/wp-content/uploads/2020/01/t-test-output-in-r.png)

这个结果表示了：

1.对正在比较的内容的解释，称为输出表中的数据

2.t 值：-33.719。注意是负数；这可以！大多数情况下，我们只关心差值的绝对值，或者说离0的距离，哪个方向无关紧要。

3.自由度：30.196。 自由度与您的样本量有关，并显示您的测试中有多少“自由”数据点可用于进行比较。 自由度越大，统计检验的效果就越好。

4.p 值：2.2e-16（即 2.2 前面有 15 个零）。这描述了您偶然看到与此一样大的 t 值的概率。

5.备择假设 (Ha) 的陈述。在这个测试中，Ha 是差异不为 0。

6.95% 置信区间。这是一个数字范围，其中 95% 的时间均值的真实差异。如果您想要更大或更小的间隔，可以将此值从 95% 更改，但 95% 是非常常用的。

7.每组的平均花瓣长度。

> t 检验示例
>
> 从输出表中，我们可以看到样本数据的均值差为 −4.084 (1.456 − 5.540)，置信区间显示均值的真实差值介于 −3.836 和 −4.331 之间。 因此，在 95% 的时间里，均值的真实差异将不同于 0。我们的 p 值 2.2e–16 远小于 0.05，因此我们可以拒绝无差异的原假设，并说高度 均值的真实差异不等于零的置信度。

## t-test的展示

当你汇报你的t检验时，最重要的值包括。**t值，p值，以及自由度**

这些将向您的听众传达两组之间的差异是否具有统计显着性（也就是不太可能偶然发生）

在上面的例子，你可以这么汇报

> 鸢尾种 1（M = 1.46；SD = 0.206）和鸢尾种 2（M = 5.54；SD = 0.569）之间的花瓣长度差异显著（t (30) = −33.7190；p < 2.2e-16）。